<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Cutive+Mono&display=swap" rel="stylesheet">
	<link href="style.css" rel="stylesheet">
    <title>Hello, world!</title>
  </head>
  <body>
    <div class="container">
		<div class="row">
			<div class="col-12 mt-5 text-center font-weight-bold">
				<h1>Pahlawan Super Asli Indonesia</h1>
				<hr/>
			</div>
			<div class="col-sm-6 col-12 mt-5">
			<p>Saat ini memang lagi musimnya film-film dengan tema superhero. Berawal dari cerita komik, kini Hulk, Captain Amerika, Thor, Deadpool, dan sejenisnya mulai muncul versi live action nya. Ceritanya nggak kalah seru dengan versi komiknya, apalagi dengan berbagai efek visual canggih yang membuat aksi para superhero ini kelihatan makin nyata.</p>
			
			<p>Indonesia, ternyata juga punya deretan pahlawan super yang sebenarnya juga nggak kalah hebat dengan superhero luar negeri, lho. Mereka juga punya kekuatan super dan tekad mulia untuk mengalahkan kejahatan.</p>
			</div>
			<div class="col-sm-6 col-12 mt-5">
			<p>Berikut ini beberapa diantaranya</p>
			<?php 
			$servername = "localhost";
			$username = "root";
			$password = "";

			$options = array(
				PDO::ATTR_ERRMODE    => PDO::ERRMODE_SILENT,
				PDO::ATTR_PERSISTENT => true,
				PDO::MYSQL_ATTR_INIT_COMMAND=>"SET SESSION group_concat_max_len = 1000000"
			);

			$blocked = ["#","/**/","+","limit","((","))",";","%23","%2F","%2A","%2B","%3B","char","substring","encode","ascii","sleep","having"];

			try {
				$conn = new PDO("mysql:host=$servername;dbname=laravel_poc", $username, $password, $options);
				if(isset($_GET['id'])){
					$user_id = $_GET['id'];
					$user_id = strtolower($user_id);
					$user_id = str_replace($blocked,"",$user_id);
					$stmt = $conn->prepare("SELECT id,name,email from users WHERE id=$user_id");
					$stmt->execute();
					$result = $stmt->fetch();
					echo "<h3 class='break'>".$result['name']."</h3>";
					echo "<hr/>";
					echo "<p>Merupakan tokoh superhero karya Anak bangsa. superhero ini sangat kuat dan sering menggunakan fungsi-fungsi dari kekuatanya dengan kebutuhan tertentu, tergantung dari musuhnya, super hero ini akan menyesuaikan tingkat kekuatanya untuk bisa dapat menggunakan fungsi khusus tersebut</p>";
					$conn = null;
				}else{
					echo "<ul>";
					for($i=1; $i<7; $i++){
						echo "<li><a href='?id=".$i."'>Pahlawan ".$i."</a></li>";
					}
					echo "</ul>";
				}

			} catch(PDOException $e) {
				echo "Connection failed: " . $e->getMessage();
			}
			?>
			</div>
		</div>
	</div>
  </body>
</html>