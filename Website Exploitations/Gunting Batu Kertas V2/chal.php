<?php
session_start();
    
    $seed = intval(date("s"));
    srand($seed);
    echo "seed: <b>".$seed."</b><br/>";
    $target = ["g", "b", "k"];
    $t = @$_POST['t'];
    if ($t != "" && strlen($t) == 1) {
        if (isset($_SESSION['menang_v2']) && $_SESSION['menang_v2'] == "") {
            $_SESSION['menang_v2'] = 1;
        }
        $res = "";
        $jwb = '';
        for($i = 0; $i < intval(@$_SESSION['menang_v2']); $i++) {
            $jwb = rand(0, 2);
            $res = $target[$jwb];
        }
        if ($res == $t) {
            echo "Selamat anda menang! <br><hr>";
            $_SESSION['menang_v2'] = $_SESSION['menang_v2'] + 1;
        } else {
            $_SESSION['menang_v2'] = 1;
            echo "Anda kalah! <br><hr>";
        }
    }

    if ($_SESSION['menang_v2'] == 10) {
        echo "Here is your flag : <b>CTFR{REDACTED}</b><br><hr>";
    }

    echo "Skor : <b>".$_SESSION['menang_v2']."</b><br/>";
    echo "Jam :<b>". date('Y-m-d H:i:s')."</b>";
?>